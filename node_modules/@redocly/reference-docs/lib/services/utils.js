"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.base64UrlEncode=exports.sha256=exports.encodeState=exports.randString=exports.cryptoLib=exports.isEmptyObject=exports.arrayMergeStrategy=exports.unescapeServerVariables=exports.normalizeMimeType=exports.isSameMime=exports.normalizePath=void 0;var tslib_1=require("tslib"),deepmerge_1=(0,tslib_1.__importDefault)(require("deepmerge")),helpers_1=require("../redoc-lib/src/utils/helpers");function normalizePath(e){return e.startsWith("/")||(e="/"+e),e.endsWith("/")&&(e=e.slice(0,-1)),e}function isSameMime(e,r){return!(!e||!r)&&normalizeMimeType(e)===normalizeMimeType(r)}function normalizeMimeType(e){if(e)return e.split(";")[0].toLowerCase()}function unescapeServerVariables(e){var r=new RegExp("%7B","g"),t=new RegExp("%7D","g");return e.replace(r,"{").replace(t,"}").replace("///","//")}function arrayMergeStrategy(e,r){if(!e.length||!hasObjectOrArray(e))return r;var t=e.filter((function(e){return Object.keys(e).length>0}));return r.forEach((function(r,n){(0,helpers_1.isMergeableObject)(r)?t[n]=(0,deepmerge_1.default)(e[n],r,{arrayMerge:arrayMergeStrategy}):Array.isArray(r)?t.push(r):t[n]=r})),t}exports.normalizePath=normalizePath,exports.isSameMime=isSameMime,exports.normalizeMimeType=normalizeMimeType,exports.unescapeServerVariables=unescapeServerVariables,exports.arrayMergeStrategy=arrayMergeStrategy;var hasObjectOrArray=function(e){return e.some((function(e){return(0,helpers_1.isObject)(e)&&Object.keys(e).length>0}))};function isEmptyObject(e){return!!e&&0===Object.keys(e).length}function randString(e){void 0===e&&(e=32);for(var r="";r.length<e;)r+=Math.random().toString(32).substring(2);return r.substring(0,e)}function encodeState(e){var r=(0,tslib_1.__assign)({randomStr:randString()},e);return btoa(JSON.stringify(r))}function sha256(e){return(0,tslib_1.__awaiter)(this,void 0,void 0,(function(){var r;return(0,tslib_1.__generator)(this,(function(t){return r=(new TextEncoder).encode(e),[2,null===exports.cryptoLib||void 0===exports.cryptoLib?void 0:exports.cryptoLib.subtle.digest("SHA-256",r)]}))}))}function base64UrlEncode(e){if(e)return btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}exports.isEmptyObject=isEmptyObject,exports.cryptoLib="undefined"!=typeof window&&(window.crypto||window.msCrypto)||void 0,exports.randString=randString,exports.encodeState=encodeState,exports.sha256=sha256,exports.base64UrlEncode=base64UrlEncode;
//# sourceMappingURL=utils.js.map