"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Operation=void 0;var templateObject_1,templateObject_2,tslib_1=require("tslib"),mobx_react_1=require("mobx-react"),react_1=(0,tslib_1.__importDefault)(require("react")),Endpoint_1=require("../../../../components/Endpoint"),common_elements_1=require("../../common-elements"),common_elements_2=require("../../common-elements"),styled_components_1=(0,tslib_1.__importDefault)(require("../../styled-components")),Callbacks_1=require("../Callbacks"),CallbackSamples_1=require("../CallbackSamples/CallbackSamples"),ExternalDocumentation_1=require("../ExternalDocumentation/ExternalDocumentation"),Extensions_1=require("../Fields/Extensions"),Markdown_1=require("../Markdown/Markdown"),Parameters_1=require("../Parameters/Parameters"),RequestSamples_1=require("../RequestSamples/RequestSamples"),ResponsesList_1=require("../Responses/ResponsesList"),ResponseSamples_1=require("../ResponseSamples/ResponseSamples"),SecurityRequirement_1=require("../SecurityRequirement/SecurityRequirement"),StoreBuilder_1=require("../StoreBuilder"),Panel_1=require("../../../../components/Panel"),store_types_1=require("../../../../services/store-types"),RenderHook_1=require("../RenderHook"),languageSwitchEvent_1=require("../RequestSamples/languageSwitchEvent"),Labels_1=require("../../services/Labels"),OperationRow=(0,styled_components_1.default)(common_elements_1.Row)(templateObject_1||(templateObject_1=(0,tslib_1.__makeTemplateObject)(["\n  backface-visibility: hidden;\n  contain: content;\n  overflow: hidden;\n"],["\n  backface-visibility: hidden;\n  contain: content;\n  overflow: hidden;\n"]))),Description=styled_components_1.default.div(templateObject_2||(templateObject_2=(0,tslib_1.__makeTemplateObject)(["\n  margin-bottom: ","px;\n"],["\n  margin-bottom: ","px;\n"])),(function(e){return 4*e.theme.spacing.unit}));exports.Operation=(0,mobx_react_1.observer)((function(e){var t,a,n,l,o=e.operation,r=o.name,s=o.description,i=o.deprecated,c=o.externalDocs,u=o.isWebhook,m=o.httpVerb,d=e.operation,p=e.layout,_=react_1.default.useContext(StoreBuilder_1.StoreContext),b=!(!s&&!c),E=null==_?void 0:_.options.hooks,f=null==_?void 0:_.options.events,k=react_1.default.useCallback((function(e){var t,a=(0,languageSwitchEvent_1.creatPanelToggleEvent)({operation:d,isExpanded:e,panelType:"responses"});null===(t=null==f?void 0:f.panelToggle)||void 0===t||t.call(f,a)}),[f]),v=react_1.default.useCallback((function(e){var t,a=(0,languageSwitchEvent_1.creatPanelToggleEvent)({operation:d,isExpanded:e,panelType:"request"});null===(t=null==f?void 0:f.panelToggle)||void 0===t||t.call(f,a)}),[f]);return react_1.default.createElement(OperationRow,{layout:p},react_1.default.createElement(common_elements_1.MiddlePanel,{isStacked:p===store_types_1.LayoutVariant.STACKED},react_1.default.createElement(RenderHook_1.RenderHook,{Hook:null==E?void 0:E.BeforeOperation,props:{operation:d}}),react_1.default.createElement(common_elements_1.H2,null,react_1.default.createElement(common_elements_2.ShareLink,{to:d.id}),react_1.default.createElement(RenderHook_1.RenderHook,{Hook:null==E?void 0:E.BeforeOperationSummary,props:{operation:d}}),r,react_1.default.createElement(RenderHook_1.RenderHook,{Hook:null==E?void 0:E.AfterOperationSummary,props:{operation:d}}),i&&react_1.default.createElement(common_elements_1.Badge,{type:"warning"},"Deprecated"),u&&react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(common_elements_1.Badge,{type:"primary"},"Webhook "),(null==_?void 0:_.options.showWebhookVerb)&&m&&react_1.default.createElement(common_elements_1.Badge,{type:"primary"},m.toUpperCase()))),(null==_?void 0:_.options.pathInMiddlePanel)&&!u&&react_1.default.createElement(Endpoint_1.Endpoint,{operation:d}),b&&react_1.default.createElement(Description,null,void 0!==s&&react_1.default.createElement(Markdown_1.Markdown,{source:s}),c&&react_1.default.createElement(ExternalDocumentation_1.ExternalDocumentation,{externalDocs:c}),Object.keys(d.extensions||{}).length?react_1.default.createElement(Extensions_1.Extensions,{extensions:d.extensions}):null),(null===(t=d.security)||void 0===t?void 0:t.length)?react_1.default.createElement(SecurityRequirement_1.SecurityRequirements,{securities:d.security}):null,(null===(a=d.parameters)||void 0===a?void 0:a.length)||d.requestBody?react_1.default.createElement(Panel_1.ScrollableContentPanel,{header:(0,Labels_1.l)("request"),onToggle:v,expanded:null==_?void 0:_.options.expandDefaultRequest},react_1.default.createElement(Parameters_1.Parameters,{parameters:d.parameters,body:d.requestBody})):null,(null===(n=d.responses)||void 0===n?void 0:n.length)?react_1.default.createElement(Panel_1.ScrollableContentPanel,{header:(0,Labels_1.l)("responses"),onToggle:k,expanded:null==_?void 0:_.options.expandDefaultResponse},react_1.default.createElement(ResponsesList_1.ResponsesList,{responses:d.responses})):null,(null===(l=d.callbacks)||void 0===l?void 0:l.length)?react_1.default.createElement(Panel_1.ScrollableContentPanel,{header:(0,Labels_1.l)("callbacks")},react_1.default.createElement(Callbacks_1.CallbacksList,{callbacks:d.callbacks})):null,react_1.default.createElement(RenderHook_1.RenderHook,{Hook:null==E?void 0:E.AfterOperation,props:{operation:d}})),(null==_?void 0:_.showRightPanel)?react_1.default.createElement(common_elements_1.RightPanel,{"data-cy":"samples-block"},!(null==_?void 0:_.options.pathInMiddlePanel)&&!u&&react_1.default.createElement(Endpoint_1.Endpoint,{operation:d}),react_1.default.createElement(RequestSamples_1.RequestSamples,{operation:d}),react_1.default.createElement(ResponseSamples_1.ResponseSamples,{operation:d}),react_1.default.createElement(CallbackSamples_1.CallbackSamples,{callbacks:d.callbacks})):null)}));
//# sourceMappingURL=Operation.js.map