"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRequestBodyFormFields=exports.RequestBodyForm=void 0;var tslib_1=require("tslib"),react_1=(0,tslib_1.__importStar)(require("react")),mobx_react_1=require("mobx-react"),helper_1=require("../common/FileUpload/helper"),form_1=require("../common/form"),redoc_lib_1=require("../../redoc-lib"),FileUpload_1=require("../common/FileUpload"),TextField_1=require("../common/TextField"),models_1=require("../../models"),Samples_1=require("../Samples");function getRequestBodyFormFields(e){var t,l,r,o,a;return((null===(l=null===(t=e.schema)||void 0===t?void 0:t.oneOf)||void 0===l?void 0:l.length)?(null===(r=e.schema)||void 0===r?void 0:r.oneOf[null===(o=e.schema)||void 0===o?void 0:o.activeOneOf].fields)||[]:(null===(a=e.schema)||void 0===a?void 0:a.fields)||[]).filter((function(e){return!e.schema.readOnly}))}exports.RequestBodyForm=(0,mobx_react_1.observer)((function(e){var t,l=e.mediaType,r=e.onChange,o=e.formApi,a=l.examples||{},n=(0,Samples_1.useExampleKey)(l.operation,a).exampleKey,i=null===(t=a[n])||void 0===t?void 0:t.rawValue,m=getRequestBodyFormFields(l);(0,react_1.useEffect)((function(){return o&&m.forEach((function(e){var t,l,r=null==i?void 0:i[e.name],a=null!==(l=null!==(t=e.example)&&void 0!==t?t:null==r?void 0:r.example)&&void 0!==l?l:r;void 0!==a&&o.setValue("body."+e.name,""+a)}))}),[n]);var d=l.schema||{};return(0,helper_1.isRootFileUpload)(d,l.name)?react_1.default.createElement(FileFormControlWrapper,null,react_1.default.createElement(form_1.FormControl,null,react_1.default.createElement(StyledFileUpload,{fullWidth:!0,id:"body."+l.name,name:"body."+l.name,accept:(0,helper_1.mimeTypeToAccept)(l.name),schema:d,contentName:l.name,onChange:r}))):d.type===models_1.DefinitionTypes.OBJECT||m?react_1.default.createElement(FileFormControlWrapper,null,m.map((function(e){var t=e.schema||{},o=l.name===models_1.MediaTypes.MULTIPART&&(0,helper_1.isMultipartFileUploadProperty)(t),a=t.contentMediaType||"",n=o?react_1.default.createElement(StyledFileUpload,{fullWidth:!0,id:"body."+e.name,name:"body."+e.name,accept:(0,helper_1.mimeTypeToAccept)(a),multiple:"array"===t.type,schema:t,contentName:e.name,onChange:r}):react_1.default.createElement(TextField_1.FormTextField,{fullWidth:!0,id:"body."+e.name,field:"body."+e.name,placeholder:t.description||e.name});return react_1.default.createElement(form_1.FormControl,{key:e.name},react_1.default.createElement(form_1.FormLabel,null,e.name,":"),n)}))):(console.warn('Invalid schema for request body and mime type: "'+l.name+'"',d),null)})),exports.getRequestBodyFormFields=getRequestBodyFormFields;var templateObject_1,templateObject_2,FileFormControlWrapper=redoc_lib_1.styled.div(templateObject_1||(templateObject_1=(0,tslib_1.__makeTemplateObject)(["\n  > div {\n    margin-top: 10px;\n  }\n"],["\n  > div {\n    margin-top: 10px;\n  }\n"]))),StyledFileUpload=(0,redoc_lib_1.styled)(FileUpload_1.FileUpload)(templateObject_2||(templateObject_2=(0,tslib_1.__makeTemplateObject)(["\n  ","\n  ",";\n  ","\n"],["\n  ","\n  ",";\n  ","\n"])),TextField_1.invertedInputStyles,(function(e){return"password"===e.inputType?"padding-right: 40px;":""}),(function(e){return e.fullWidth?"width: 100%;":""}));
//# sourceMappingURL=RequestBodyForm.js.map