import{__makeTemplateObject}from"tslib";import{observer}from"mobx-react";import React from"react";import{Endpoint}from"../../../../components/Endpoint";import{Badge,H2,MiddlePanel,RightPanel,Row}from"../../common-elements";import{ShareLink}from"../../common-elements";import styled from"../../styled-components";import{CallbacksList}from"../Callbacks";import{CallbackSamples}from"../CallbackSamples/CallbackSamples";import{ExternalDocumentation}from"../ExternalDocumentation/ExternalDocumentation";import{Extensions}from"../Fields/Extensions";import{Markdown}from"../Markdown/Markdown";import{Parameters}from"../Parameters/Parameters";import{RequestSamples}from"../RequestSamples/RequestSamples";import{ResponsesList}from"../Responses/ResponsesList";import{ResponseSamples}from"../ResponseSamples/ResponseSamples";import{SecurityRequirements}from"../SecurityRequirement/SecurityRequirement";import{StoreContext}from"../StoreBuilder";import{ScrollableContentPanel}from"../../../../components/Panel";import{LayoutVariant}from"../../../../services/store-types";import{RenderHook}from"../RenderHook";import{creatPanelToggleEvent}from"../RequestSamples/languageSwitchEvent";import{l}from"../../services/Labels";var templateObject_1,templateObject_2,OperationRow=styled(Row)(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  backface-visibility: hidden;\n  contain: content;\n  overflow: hidden;\n"],["\n  backface-visibility: hidden;\n  contain: content;\n  overflow: hidden;\n"]))),Description=styled.div(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  margin-bottom: ","px;\n"],["\n  margin-bottom: ","px;\n"])),(function(e){return 4*e.theme.spacing.unit}));export var Operation=observer((function(e){var t,o,n,a,r=e.operation,i=r.name,s=r.description,c=r.deprecated,m=r.externalDocs,p=r.isWebhook,d=r.httpVerb,u=e.operation,R=e.layout,b=React.useContext(StoreContext),E=!(!s&&!m),v=null==b?void 0:b.options.hooks,k=null==b?void 0:b.options.events,f=React.useCallback((function(e){var t,o=creatPanelToggleEvent({operation:u,isExpanded:e,panelType:"responses"});null===(t=null==k?void 0:k.panelToggle)||void 0===t||t.call(k,o)}),[k]),g=React.useCallback((function(e){var t,o=creatPanelToggleEvent({operation:u,isExpanded:e,panelType:"request"});null===(t=null==k?void 0:k.panelToggle)||void 0===t||t.call(k,o)}),[k]);return React.createElement(OperationRow,{layout:R},React.createElement(MiddlePanel,{isStacked:R===LayoutVariant.STACKED},React.createElement(RenderHook,{Hook:null==v?void 0:v.BeforeOperation,props:{operation:u}}),React.createElement(H2,null,React.createElement(ShareLink,{to:u.id}),React.createElement(RenderHook,{Hook:null==v?void 0:v.BeforeOperationSummary,props:{operation:u}}),i,React.createElement(RenderHook,{Hook:null==v?void 0:v.AfterOperationSummary,props:{operation:u}}),c&&React.createElement(Badge,{type:"warning"},"Deprecated"),p&&React.createElement(React.Fragment,null,React.createElement(Badge,{type:"primary"},"Webhook "),(null==b?void 0:b.options.showWebhookVerb)&&d&&React.createElement(Badge,{type:"primary"},d.toUpperCase()))),(null==b?void 0:b.options.pathInMiddlePanel)&&!p&&React.createElement(Endpoint,{operation:u}),E&&React.createElement(Description,null,void 0!==s&&React.createElement(Markdown,{source:s}),m&&React.createElement(ExternalDocumentation,{externalDocs:m}),Object.keys(u.extensions||{}).length?React.createElement(Extensions,{extensions:u.extensions}):null),(null===(t=u.security)||void 0===t?void 0:t.length)?React.createElement(SecurityRequirements,{securities:u.security}):null,(null===(o=u.parameters)||void 0===o?void 0:o.length)||u.requestBody?React.createElement(ScrollableContentPanel,{header:l("request"),onToggle:g,expanded:null==b?void 0:b.options.expandDefaultRequest},React.createElement(Parameters,{parameters:u.parameters,body:u.requestBody})):null,(null===(n=u.responses)||void 0===n?void 0:n.length)?React.createElement(ScrollableContentPanel,{header:l("responses"),onToggle:f,expanded:null==b?void 0:b.options.expandDefaultResponse},React.createElement(ResponsesList,{responses:u.responses})):null,(null===(a=u.callbacks)||void 0===a?void 0:a.length)?React.createElement(ScrollableContentPanel,{header:l("callbacks")},React.createElement(CallbacksList,{callbacks:u.callbacks})):null,React.createElement(RenderHook,{Hook:null==v?void 0:v.AfterOperation,props:{operation:u}})),(null==b?void 0:b.showRightPanel)?React.createElement(RightPanel,{"data-cy":"samples-block"},!(null==b?void 0:b.options.pathInMiddlePanel)&&!p&&React.createElement(Endpoint,{operation:u}),React.createElement(RequestSamples,{operation:u}),React.createElement(ResponseSamples,{operation:u}),React.createElement(CallbackSamples,{callbacks:u.callbacks})):null)}));
//# sourceMappingURL=Operation.js.map