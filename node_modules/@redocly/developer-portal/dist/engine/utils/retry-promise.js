const retry=(a,{reporter:b,link:c,interval:d=1e3,retries:e=5,currentAttempt:f=0})=>new Promise((g,h)=>{a().then(g).catch(i=>{setTimeout(()=>{if(++f,1<f&&b.info(`Fetching ${c} (attempt #${f})`),f===e)return h(i);const j={reporter:b,link:c,interval:d,retries:e,currentAttempt:f};retry(a,j).then(g,h)},d)})});module.exports={retry};