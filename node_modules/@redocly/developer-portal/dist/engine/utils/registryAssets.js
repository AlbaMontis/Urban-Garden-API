const path=require("path"),{RedoclyClient}=require("@redocly/openapi-core"),{findContentFolder}=require("./config"),{downloadAssetsFromFolder}=require("./registry/downloadFolder");async function downloadRegistryAssets(a,b,c,d){const e=findContentFolder(),f=a.split("?branch=")[0],g=new RedoclyClient,h={authorization:(await g.getAuthorizationHeader())||""},i={link:a,contentDir:e,directory:b,headers:h,reporter:c,downloadOnlyOpenapi:d};return f.endsWith("/")||""===path.extname(f)?(i.headers={...i.headers,accept:"application/json"},await downloadAssetsFromFolder(i)):(c.panicOnBuild(`Catalog links should be to the folder only. Links to the files are not supported: ${a}`),Promise.resolve())}module.exports={downloadRegistryAssets};